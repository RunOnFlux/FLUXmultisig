(function(e){function t(t){for(var s,r,a=t[0],c=t[1],l=t[2],d=0,g=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&g.push(o[r][0]),o[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(g.length)g.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},o={app:0},i=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},"199c":function(e,t,n){"use strict";(function(Buffer){const e=n("7da2"),s=n("bc3a");t["a"]={name:"App",data(){return{keypair:{publickey:"",privatekey:""},multisig:{address:"",redeemScript:""},publickeys:[],inputs:1,reqsig:1,unsignedTx:{myAddress:"",receiver:"",amount:0,message:"",hex:""},signedTx:{rawtx:"",privatekey:"",redeemScript:"",hex:""},finalisedTx:{rawtx:"",hex:""},coincontrol:{address:"",utxos:[],selected:[],errorMsg:"",currentPage:1,elementsPerPage:10,getrows:0,numpages:0,show:!1,selectedValueSats:0,selectedValueAmount:0},avoidFluxNodeAmounts:!0,sendAllFlux:!1,isTestnet:!1,mainnetExplorer:"https://explorer.runonflux.io",testnetExplorer:"https://testnet.runonflux.io"}},methods:{generateKeypair(){const t=this.isTestnet?e.networks.fluxtestnet:e.networks.zelcash,n=e.ECPair.makeRandom({network:t}),s=n.getPublicKeyBuffer().toString("hex");this.keypair.publickey=s,this.keypair.privatekey=n.toWIF()},generateMultisig(){try{const t=this.publickeys.filter(e=>null!=e&&""!==e&&void 0!==e),n=t.map(e=>Buffer.from(e,"hex")),s=e.script.multisig.output.encode(Number(this.reqsig),n),o=s.toString("hex"),i=e.script.scriptHash.output.encode(e.crypto.hash160(s)),r=this.isTestnet?e.networks.fluxtestnet:e.networks.zelcash,a=e.address.fromOutputScript(i,r);this.multisig.address=a,this.multisig.redeemScript=o}catch(t){console.log(t),this.multisig.address=t.message,this.multisig.redeemScript=t.message}},addPubKey(){this.inputs+=1},num_pages(){this.coincontrol.numpages=Math.ceil(this.coincontrol.utxos.length/this.coincontrol.elementsPerPage)},get_rows(){const e=(this.coincontrol.currentPage-1)*this.coincontrol.elementsPerPage,t=e+this.coincontrol.elementsPerPage;this.coincontrol.getrows=this.coincontrol.utxos.slice(e,t)},change_page(e){this.coincontrol.currentPage=e,this.get_rows()},checkboxClicked(e,t){e?this.coincontrol.selectedValueSats+=this.coincontrol.utxos[t].satoshis:this.coincontrol.selectedValueSats-=this.coincontrol.utxos[t].satoshis,this.coincontrol.selectedValueAmount=Number(1e-8*this.coincontrol.selectedValueSats).toFixed(8)},async fetchUtxoSet(){try{this.coincontrol.selectedValueSats=0,this.coincontrol.selectedValueAmount=0,this.coincontrol.errorMsg="",this.coincontrol.currentPage=1,this.coincontrol.selected=[];const e=this.isTestnet?this.testnetExplorer:this.mainnetExplorer,t=await s.get(`${e}/api/addr/${this.coincontrol.address}/utxo`);this.coincontrol.utxos=t.data,this.num_pages(),this.get_rows(),this.coincontrol.show=!0}catch(e){console.log(e),this.coincontrol.errorMsg=e.message}},async buildUnsignedRawTx(){try{const t=this.isTestnet?e.networks.fluxtestnet:e.networks.zelcash,n=this.isTestnet?this.testnetExplorer:this.mainnetExplorer,o=await s.get(`${n}/api/addr/${this.unsignedTx.myAddress}/utxo`),i=o.data;let r=0,a=[];const c=Math.round(1e8*Number(this.unsignedTx.amount)),l=0;let u=[{address:this.unsignedTx.receiver,satoshis:c}],d=0;const g=new Set;if(this.coincontrol.selectedValueSats>0)for(let e=0;e<this.coincontrol.selected.length;e+=1)!0===this.coincontrol.selected[e]&&g.add(this.coincontrol.utxos[e].txid+this.coincontrol.utxos[e].vout);console.log(g);for(let e=0;e<i.length;e+=1)if(0!==i[e].height){if(this.avoidFluxNodeAmounts&&(4e12===+i[e].satoshis||125e10===+i[e].satoshis||1e11===+i[e].satoshis))continue;if(this.coincontrol.selectedValueSats>0&&!g.has(i[e].txid+i[e].vout))continue;if(a=a.concat({txid:i[e].txid,vout:i[e].vout,scriptPubKey:i[e].scriptPubKey,satoshis:i[e].satoshis}),r+=i[e].satoshis,d+=1,this.sendAllFlux){if(d>=2e3)break;continue}if(r>=c+l)break}if(this.sendAllFlux)u[0].satoshis=r;else{const e=r-c-l;if(e>0&&(u=u.concat({address:this.unsignedTx.myAddress,satoshis:e})),e<0)return void(this.unsignedTx.hex="Insufficient amount")}const p=new e.TransactionBuilder(t,l);if(p.setVersion(4),p.setVersionGroupId(2301567109),a.forEach(e=>p.addInput(e.txid,e.vout)),u.forEach(e=>p.addOutput(e.address,e.satoshis)),""!==this.unsignedTx.message){const t=Buffer.from(this.unsignedTx.message,"utf8"),n=e.script.nullData.output.encode(t);p.addOutput(n,0)}const h=p.buildIncomplete();this.unsignedTx.hex=h.toHex()}catch(t){console.log(t),this.unsignedTx.hex=t.message}},async signTransaction(){try{const t=this.isTestnet?e.networks.fluxtestnet:e.networks.zelcash,n=e.Transaction.SIGHASH_ALL,o=this.signedTx.rawtx,i=e.ECPair.fromWIF(this.signedTx.privatekey,t),r=e.TransactionBuilder.fromTransaction(e.Transaction.fromHex(o,t),t);console.log(r);let a=0;for(const e of r.inputs){const e=this.getValueHexBuffer(r.tx.ins[a].hash.toString("hex")),{index:t}=r.tx.ins[a];console.log(r.tx),console.log(e);const o=this.isTestnet?this.testnetExplorer:this.mainnetExplorer,c=await s.get(`${o}/api/tx/${e}`),l=Math.round(1e8*Number(c.data.vout[t].value));r.sign(a,i,Buffer.from(this.signedTx.redeemScript,"hex"),n,l),a+=1}const c=r.buildIncomplete();this.signedTx.hex=c.toHex()}catch(t){console.log(t),this.signedTx.hex=t.message}},finaliseTransaction(){try{const t=this.isTestnet?e.networks.fluxtestnet:e.networks.zelcash,n=this.finalisedTx.rawtx,s=e.TransactionBuilder.fromTransaction(e.Transaction.fromHex(n,t),t),o=s.build();this.finalisedTx.hex=o.toHex()}catch(t){console.log(t),this.signedTx.hex=t.message}},getValueHexBuffer(e){const t=Buffer.from(e,"hex").reverse();return t.toString("hex")}}}}).call(this,n("b639").Buffer)},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);var s=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("button",{on:{click:function(t){e.isTestnet=!e.isTestnet}}},[e._v(" USING "+e._s(e.isTestnet?"TESTNET":"MAINNET")+". Click to use "+e._s(e.isTestnet?"MAINNET":"TESTNET")+" ")]),n("h1",[e._v("Welcome to FLUX multisig")]),n("hr"),n("h3",[e._v(" Keypair generation tool ")]),n("p",[e._v(" This tool generates a Public Key and corresponding private key that can later be used for MultiSignature address. ")]),n("div",[n("button",{on:{click:e.generateKeypair}},[e._v(" Generate Keypair ")]),n("br"),e._v(" Public Key: "+e._s(e.keypair.publickey)+" "),n("br"),e._v(" Private Key: "+e._s(e.keypair.privatekey)+" ")]),n("hr"),n("h3",[e._v(" Multi Signature address generation tool ")]),n("p",[e._v(" This tool generates a Multisignature address from given set of Public Keys and required signatures needed. ")]),n("div",[e._l(e.inputs,(function(t){return n("div",{key:t},[e._v(" Public Key "+e._s(t)+": "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.publickeys[t-1],expression:"publickeys[n-1]"}],staticClass:"pubkey",domProps:{value:e.publickeys[t-1]},on:{input:function(n){n.target.composing||e.$set(e.publickeys,t-1,n.target.value)}}})])})),n("br"),n("button",{on:{click:e.addPubKey}},[e._v(" Add Public Key Input ")]),n("br"),n("br"),n("div",[e._v(" Signatures needed: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.reqsig,expression:"reqsig"}],domProps:{value:e.reqsig},on:{input:function(t){t.target.composing||(e.reqsig=t.target.value)}}}),n("br"),n("br"),n("button",{on:{click:e.generateMultisig}},[e._v(" Generate Multisig Address ")]),n("br"),n("br"),e._v(" Address: "+e._s(e.multisig.address)+" "),n("br"),e._v(" Redeem Script: "+e._s(e.multisig.redeemScript)+" ")])],2),n("hr"),n("div",[n("h3",[e._v(" Coin Control ")]),n("p",[e._v(" This tool lets you select which outputs you would like to spend ")]),n("br"),e._v(" Address: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.coincontrol.address,expression:"coincontrol.address"}],staticClass:"pubkey",domProps:{value:e.coincontrol.address},on:{input:function(t){t.target.composing||e.$set(e.coincontrol,"address",t.target.value)}}}),n("p",[n("button",{on:{click:e.fetchUtxoSet}},[e._v(" View Spendable Transactions ")]),n("br"),n("br"),e._v(" "+e._s(e.coincontrol.errorMsg)+" ")]),e.coincontrol.show?n("div",[n("table",{staticClass:"center",attrs:{id:"coincontroltable"}},[e._m(0),n("tbody",e._l(e.coincontrol.getrows,(function(t,s){return n("tr",{key:s},[n("td",[e._v(e._s(10*(e.coincontrol.currentPage-1)+s))]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.coincontrol.selected[10*(e.coincontrol.currentPage-1)+s],expression:"coincontrol.selected[(coincontrol.currentPage - 1) * 10 + index]"}],staticClass:"checkbox",attrs:{"aria-labelledby":"coinControl",type:"checkbox"},domProps:{checked:Array.isArray(e.coincontrol.selected[10*(e.coincontrol.currentPage-1)+s])?e._i(e.coincontrol.selected[10*(e.coincontrol.currentPage-1)+s],null)>-1:e.coincontrol.selected[10*(e.coincontrol.currentPage-1)+s]},on:{change:[function(t){var n=e.coincontrol.selected[10*(e.coincontrol.currentPage-1)+s],o=t.target,i=!!o.checked;if(Array.isArray(n)){var r=null,a=e._i(n,r);o.checked?a<0&&e.$set(e.coincontrol.selected,10*(e.coincontrol.currentPage-1)+s,n.concat([r])):a>-1&&e.$set(e.coincontrol.selected,10*(e.coincontrol.currentPage-1)+s,n.slice(0,a).concat(n.slice(a+1)))}else e.$set(e.coincontrol.selected,10*(e.coincontrol.currentPage-1)+s,i)},function(t){e.checkboxClicked(t.target.checked,10*(e.coincontrol.currentPage-1)+s)}]}})]),n("td",[e._v(e._s(t.confirmations))]),n("td",[e._v(e._s(t.txid))]),n("td",[e._v(e._s(t.vout))]),n("td",[e._v(e._s(t.amount))])])})),0)]),n("br"),n("div",{staticClass:"pagination"},e._l(e.coincontrol.numpages,(function(t){return n("div",{key:t,staticClass:"number",class:[t==e.coincontrol.currentPage?"active":""],on:{click:function(n){return e.change_page(t)}}},[e._v(" "+e._s(t)+" ")])})),0)]):e._e()]),n("hr"),n("div",[n("h3",[e._v(" Build Unsigned Transaction ")]),n("p",[e._v(" This tool helps you build an unsigned transaction. ")]),n("p",[e._v(" Avoid Flux Node Collateral Amounts: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.avoidFluxNodeAmounts,expression:"avoidFluxNodeAmounts"}],attrs:{id:"checkbox","aria-labelledby":"avoindFluxNodeAmounts",type:"checkbox"},domProps:{checked:Array.isArray(e.avoidFluxNodeAmounts)?e._i(e.avoidFluxNodeAmounts,null)>-1:e.avoidFluxNodeAmounts},on:{change:function(t){var n=e.avoidFluxNodeAmounts,s=t.target,o=!!s.checked;if(Array.isArray(n)){var i=null,r=e._i(n,i);s.checked?r<0&&(e.avoidFluxNodeAmounts=n.concat([i])):r>-1&&(e.avoidFluxNodeAmounts=n.slice(0,r).concat(n.slice(r+1)))}else e.avoidFluxNodeAmounts=o}}}),n("br"),e._v(" Select All Flux (Ignores the Amount - Max 2000 inputs): "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.sendAllFlux,expression:"sendAllFlux"}],attrs:{id:"checkbox","aria-labelledby":"sendAll",type:"checkbox"},domProps:{checked:Array.isArray(e.sendAllFlux)?e._i(e.sendAllFlux,null)>-1:e.sendAllFlux},on:{change:function(t){var n=e.sendAllFlux,s=t.target,o=!!s.checked;if(Array.isArray(n)){var i=null,r=e._i(n,i);s.checked?r<0&&(e.sendAllFlux=n.concat([i])):r>-1&&(e.sendAllFlux=n.slice(0,r).concat(n.slice(r+1)))}else e.sendAllFlux=o}}}),n("br")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.coincontrol.selectedValueSats,expression:"coincontrol.selectedValueSats"}],staticStyle:{color:"green"}},[e._v(" Coin Control Active: "),n("b",[e._v(e._s(e.coincontrol.selectedValueAmount))])]),n("br"),e._v(" My Address: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.unsignedTx.myAddress,expression:"unsignedTx.myAddress"}],staticClass:"pubkey",domProps:{value:e.unsignedTx.myAddress},on:{input:function(t){t.target.composing||e.$set(e.unsignedTx,"myAddress",t.target.value)}}}),n("br"),e._v(" Receiver Address: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.unsignedTx.receiver,expression:"unsignedTx.receiver"}],staticClass:"pubkey",domProps:{value:e.unsignedTx.receiver},on:{input:function(t){t.target.composing||e.$set(e.unsignedTx,"receiver",t.target.value)}}}),n("br"),e._v(" Amount to Send: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.unsignedTx.amount,expression:"unsignedTx.amount"}],staticClass:"pubkey",attrs:{disabled:e.sendAllFlux},domProps:{value:e.unsignedTx.amount},on:{input:function(t){t.target.composing||e.$set(e.unsignedTx,"amount",t.target.value)}}}),n("br"),e._v(" Message to Send: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.unsignedTx.message,expression:"unsignedTx.message"}],staticClass:"pubkey",domProps:{value:e.unsignedTx.message},on:{input:function(t){t.target.composing||e.$set(e.unsignedTx,"message",t.target.value)}}}),n("br"),n("br"),n("button",{on:{click:e.buildUnsignedRawTx}},[e._v(" Build! ")]),n("br"),n("br"),e._v(" Raw Transaction: "+e._s(e.unsignedTx.hex)+" ")]),n("hr"),n("div",[n("h3",[e._v(" Sign Transaction ")]),n("p",[e._v(" This tool signs a transaction that is being performed from a multisig address with your private key. Fee is 0 satoshis. ")]),e._v(" My Private Key: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.signedTx.privatekey,expression:"signedTx.privatekey"}],staticClass:"pubkey",domProps:{value:e.signedTx.privatekey},on:{input:function(t){t.target.composing||e.$set(e.signedTx,"privatekey",t.target.value)}}}),n("br"),e._v(" My Multisig address Redeem Script: "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.signedTx.redeemScript,expression:"signedTx.redeemScript"}],staticClass:"pubkey",attrs:{"aria-labelledby":"redeemScript"},domProps:{value:e.signedTx.redeemScript},on:{input:function(t){t.target.composing||e.$set(e.signedTx,"redeemScript",t.target.value)}}}),e._v(" "),n("br"),e._v(" Transaction to sign: "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.signedTx.rawtx,expression:"signedTx.rawtx"}],staticClass:"pubkey",attrs:{"aria-labelledby":"transactionToSign"},domProps:{value:e.signedTx.rawtx},on:{input:function(t){t.target.composing||e.$set(e.signedTx,"rawtx",t.target.value)}}}),e._v(" "),n("br"),n("br"),n("button",{on:{click:e.signTransaction}},[e._v(" Sign! ")]),n("br"),n("br"),e._v(" Raw Transaction: "+e._s(e.signedTx.hex)+" ")]),n("hr"),n("div",[n("h3",[e._v(" Finalise Transaction ")]),n("p",[e._v(" This tool finalises a transaction that was previously signed. ")]),e._v(" Transaction to finalise: "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.finalisedTx.rawtx,expression:"finalisedTx.rawtx"}],staticClass:"pubkey",attrs:{"aria-labelledby":"transactionToFinalise"},domProps:{value:e.finalisedTx.rawtx},on:{input:function(t){t.target.composing||e.$set(e.finalisedTx,"rawtx",t.target.value)}}}),e._v(" "),n("br"),n("br"),n("button",{on:{click:e.finaliseTransaction}},[e._v(" Finalise! ")]),n("br"),n("br"),e._v(" Finalised Transaction: "+e._s(e.finalisedTx.hex)+" ")])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th"),n("th"),n("th",[e._v("Confirmations")]),n("th",[e._v("Txid")]),n("th",[e._v("Vout")]),n("th",[e._v("Amount")])])])}],r=n("199c"),a=r["a"],c=(n("d333"),n("2877")),l=Object(c["a"])(a,o,i,!1,null,"ea467e20",null),u=l.exports;s["a"].config.productionTip=!1,new s["a"]({render:e=>e(u)}).$mount("#app")},6:function(e,t){},"77c1":function(e,t,n){},d333:function(e,t,n){"use strict";n("77c1")}});
//# sourceMappingURL=app.ff784ae7.js.map